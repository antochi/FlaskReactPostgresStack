webpackJsonp([1],{114:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserData=t.loginByJWT=void 0;var r=n(118),o=a(r),u=n(117),s=a(u),l=n(71),c=a(l),i=n(72),d=a(i),f=n(70),p=a(f),m=function(){var e=(0,p.default)(c.default.mark(function e(t,n,a,r){var o,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new d.default(function(e,t){setTimeout(t,a,r)}),u=new d.default(function(e,a){fetch(t,n).then(function(t){return e(t)}).catch(a)}),e.abrupt("return",d.default.race([o,u]));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),h=(t.loginByJWT=function(){var e=(0,p.default)(c.default.mark(function e(t,n){var a,r,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t,password:n},r=3e3,e.next=4,m(h+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:(0,s.default)(a)},r,g.FETCH_TIMEOUT).then(function(e){if(e.ok)return e.json();throw Error(e.statusText)}).then(function(e){console.log((0,o.default)(e));var t=e.auth_token;return console.log("Received token: "+t),{loggedin:!0,token:t}}).catch(function(e){return console.log("Sorry, bad credentials."),{loggedin:!1,token:""}});case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.getUserData=function(){var e=(0,p.default)(c.default.mark(function e(t){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=3e3,e.next=3,m(h+"/auth/status",{method:"GET",headers:{Authorization:"Bearer "+t}},n,g.FETCH_TIMEOUT).then(function(e){if(e.ok)return e.json();throw Error(e.statusText)}).then(function(e){console.log((0,o.default)(e));var t=e.status,n=e.data;return console.log("Response status: "+t),console.log("Data: "+(0,s.default)(n)),{success:"success"===t,data:"{\n  data: "+n.user_id+"\n  email: "+n.email+"\n  admin: "+n.admin+"\n  registered_on: "+n.registered_on+"\n}"}}).catch(function(e){return console.log("Failed to get user data."+e),{success:!1,data:e.toString()}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),"http://localhost:5000"),g={FETCH_TIMEOUT:"===== Fetch Request Timed Out ====="}},115:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(71),o=a(r),u=n(70),s=a(u),l=n(24),c=a(l),i=n(23),d=a(i),f=n(114),p=c.default.createClass({displayName:"DemoFetch",getInitialState:function(){return{email:this.props.email,password:this.props.password,token:"",userdata:""}},render:function(){var e=this;return c.default.createElement("div",{className:"hello-world"},c.default.createElement("input",{type:"text",value:this.state.email,onChange:function(t){e.setState({email:t.target.value},function(){console.log("email updated: "+e.state.email)})},placeholder:"email"}),c.default.createElement("input",{type:"text",value:this.state.password,onChange:function(t){e.setState({password:t.target.value},function(){console.log("password updated: "+e.state.password)})},placeholder:"password"}),c.default.createElement("br",null),c.default.createElement("p",null,"current token: ",this.state.token),c.default.createElement("br",null),c.default.createElement("button",{onClick:(0,s.default)(o.default.mark(function t(){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("submit to login"),t.next=3,(0,f.loginByJWT)(e.state.email,e.state.password);case 3:n=t.sent,n.loggedin?(console.log("success!"),e.setState({token:n.token},function(){console.log("token updated: "+e.state.token)})):console.log("failure!");case 5:case"end":return t.stop()}},t,e)}))},"login"),c.default.createElement("hr",null),c.default.createElement("p",null,"result:"),c.default.createElement("pre",null,this.state.userdata),c.default.createElement("button",{onClick:(0,s.default)(o.default.mark(function t(){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("go get some user data"),t.next=3,(0,f.getUserData)(e.state.token);case 3:n=t.sent,e.setState({userdata:n.data});case 5:case"end":return t.stop()}},t,e)}))},"get user data"),c.default.createElement("hr",null),c.default.createElement("form",{action:"/methodview/template",method:"post"},c.default.createElement("button",{name:"foo",value:"bar"},"Test Post to MethodView")))}});d.default.render(c.default.createElement(p,{email:"test1@test.com",password:"12345"}),document.getElementById("main"))}},[115]);